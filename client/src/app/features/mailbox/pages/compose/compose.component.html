<div class="page">

  <div class="header">
    <div class="title">
      <h2>Compose</h2>
      <span class="hint">نوشتن نامه جدید</span>
    </div>

    <div class="actions">
      <button class="btn ghost" type="button" routerLink="/app/inbox">انصراف</button>
      <button class="btn primary" type="button" (click)="send()" [disabled]="isSending">
        {{ isSending ? 'در حال ارسال...' : 'ارسال' }}
      </button>
    </div>
  </div>

  <div class="card">

    <div class="field">
      <label>گیرنده</label>
      <input
        type="email"
        placeholder="example@company.com"
        [formControl]="form.controls.to" />
      <small class="err" *ngIf="form.controls.to.touched && form.controls.to.invalid">
        وارد کردن گیرنده الزامی است.
      </small>
    </div>

    <div class="field">
      <label>موضوع</label>
      <input
        type="text"
        placeholder="موضوع نامه..."
        [formControl]="form.controls.subject" />
      <small class="err" *ngIf="form.controls.subject.touched && form.controls.subject.invalid">
        موضوع الزامی است.
      </small>
    </div>

    <div class="field">
      <label>متن</label>
      <textarea
        rows="10"
        placeholder="متن نامه را بنویسید..."
        [formControl]="form.controls.body"></textarea>
    </div>

    <div class="attach-area">
      <div class="attach-top">
        <h4>Attachments</h4>

        <label class="file-btn">
          افزودن فایل
          <input type="file" (change)="onFilesSelected($event)" multiple />
        </label>
      </div>

      <div class="chips" *ngIf="attachments.length">
        <div class="chip" *ngFor="let a of attachments; let i = index">
          <span class="name">{{ a.name }}</span>
          <span class="meta">{{ a.size | fileSize }}</span>
          <button type="button" class="x" (click)="removeAttachment(i)">×</button>
        </div>
      </div>

      <div class="empty" *ngIf="!attachments.length">
        فایلی ضمیمه نشده است.
      </div>
    </div>

  </div>

  <div class="sticky">
    <button class="btn ghost" type="button" routerLink="/app/inbox">انصراف</button>
    <button class="btn primary" type="button" (click)="send()" [disabled]="isSending">
      {{ isSending ? 'در حال ارسال...' : 'ارسال' }}
    </button>
  </div>

</div>